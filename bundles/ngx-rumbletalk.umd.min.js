!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-rumbletalk",["exports","@angular/platform-browser","@angular/core"],t):t(e["ngx-rumbletalk"]={},e.ng.platformBrowser,e.ng.core)}(this,function(e,t,r){"use strict";var n=(a.decorators=[{type:r.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[]},a.ngInjectableDef=r.defineInjectable({factory:function(){return new a},token:a,providedIn:"root"}),a);function a(){}var o,i="https://",s="https://www.rumbletalk.com/",l="stagging5.rumbletalk.net:4433",c=(Object.defineProperty(u.prototype,"safeSrc",{get:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.src)},enumerable:!0,configurable:!0}),u.prototype.ngOnInit=function(){this.addListeners(),this.instantiateQuery()},u.prototype.addListeners=function(){window.addEventListener("message",this.info,!1)},u.prototype.reload=function(){var n=this,a=new XMLHttpRequest;a.open("GET",s+"client/service.php?hash="+this.hash,!0),a.onreadystatechange=function(){if(4===a.readyState)try{var e=JSON.parse(a.responseText);if(e.status){l=e.address;var t=i+l+"/"+n.hash+"/";n.iframeElement.nativeElement instanceof HTMLIFrameElement?n.iframeElement.nativeElement.src=t:n.iframeElement.nativeElement.location.href=t,n.instantiateQuery()}}catch(r){location.reload()}},a.send()},u.prototype.instantiateQuery=function(){var e=this;o=setInterval(function(){e.query()},1e3)},u.prototype.query=function(){try{var e,t=void 0;e=this.iframeElement.nativeElement instanceof HTMLIFrameElement?(t=this.iframeElement.nativeElement.contentWindow,i+l):(t=this.iframeElement.nativeElement,s),t.postMessage("toolbar",e)}catch(r){}},u.prototype.validateOrigin=function(e){return/^https:\/\/.+\.rumbletalk\.(net|com)(:4433)?$/.test(e)},u.decorators=[{type:r.Component,args:[{selector:"ngx-rumbletalk",template:'<iframe\r\n  #iframe\r\n  allowtransparency="true"\r\n  allow="microphone; camera"\r\n  [src]="safeSrc"\r\n  [width]="width"\r\n  [height]="height"\r\n></iframe>\r\n',changeDetection:r.ChangeDetectionStrategy.OnPush,styles:["iframe{border:0;width:100%;height:100%;background-color:transparent;overflow:hidden}"]}]}],u.ctorParameters=function(){return[{type:t.DomSanitizer}]},u.propDecorators={iframeElement:[{type:r.ViewChild,args:["iframe"]}],src:[{type:r.Input}],floating:[{type:r.Input}],width:[{type:r.Input}],height:[{type:r.Input}],hash:[{type:r.Input}]},u);function u(e){var t=this;this.sanitizer=e,this.info=function(e){isFinite(e.data)?clearInterval(o):"object"==typeof e.data&&e.data.reload&&t.reload()}}var p=(f.decorators=[{type:r.NgModule,args:[{declarations:[c],imports:[],exports:[c]}]}],f);function f(){}e.NgxRumbletalkService=n,e.NgxRumbletalkComponent=c,e.NgxRumbletalkModule=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-rumbletalk.umd.min.js.map