!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/platform-browser"),require("@angular/core")):"function"==typeof define&&define.amd?define("ngx-rumbletalk",["exports","@angular/platform-browser","@angular/core"],t):t(e["ngx-rumbletalk"]={},e.ng.platformBrowser,e.ng.core)}(this,function(e,t,n){"use strict";var r=(a.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],a.ctorParameters=function(){return[]},a.ngInjectableDef=n.defineInjectable({factory:function(){return new a},token:a,providedIn:"root"}),a);function a(){}var o,i="https://",s="https://www.rumbletalk.com/",l=(Object.defineProperty(c.prototype,"safeSrc",{get:function(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.src)},enumerable:!0,configurable:!0}),c.prototype.ngOnInit=function(){this.addListeners(),this.instantiateQuery()},c.prototype.addListeners=function(){window.addEventListener("message",this.info.bind(this),!1)},c.prototype.info=function(e){isFinite(e.data)?clearInterval(o):"object"==typeof e.data&&e.data.reload&&this.reload()},c.prototype.reload=function(){var a=this,o=new XMLHttpRequest;o.open("GET",s+"client/service.php?hash="+this.hash,!0),o.onreadystatechange=function(){if(4===o.readyState)try{var e=JSON.parse(o.responseText);if(e.status){var t=e.address,n=i+t+"/"+a.hash+"/";a.iframeElement.nativeElement instanceof HTMLIFrameElement?a.iframeElement.nativeElement.src=n:a.iframeElement.nativeElement.location.href=n,a.instantiateQuery()}}catch(r){location.reload()}},o.send()},c.prototype.instantiateQuery=function(){o=setInterval(this.query.bind(this),1e3)},c.prototype.query=function(){try{var e,t=void 0;e=this.iframeElement.nativeElement instanceof HTMLIFrameElement?(t=this.iframeElement.nativeElement.contentWindow,i+"stagging5.rumbletalk.net:4433"):(t=this.iframeElement.nativeElement,s),t.postMessage("toolbar",e)}catch(n){}},c.prototype.validateOrigin=function(e){return/^https:\/\/.+\.rumbletalk\.(net|com)(:4433)?$/.test(e)},c.decorators=[{type:n.Component,args:[{selector:"ngx-rumbletalk",template:'<iframe\r\n  #iframe\r\n  allowtransparency="true"\r\n  allow="microphone; camera"\r\n  [src]="safeSrc"\r\n  [width]="width"\r\n  [height]="height"\r\n></iframe>\r\n',changeDetection:n.ChangeDetectionStrategy.OnPush,styles:["iframe{border:0;width:100%;height:100%;background-color:transparent;overflow:hidden}"]}]}],c.ctorParameters=function(){return[{type:t.DomSanitizer}]},c.propDecorators={iframeElement:[{type:n.ViewChild,args:["iframe"]}],src:[{type:n.Input}],floating:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],hash:[{type:n.Input}]},c);function c(e){this.sanitizer=e}var p=(u.decorators=[{type:n.NgModule,args:[{declarations:[l],imports:[],exports:[l]}]}],u);function u(){}e.NgxRumbletalkService=r,e.NgxRumbletalkComponent=l,e.NgxRumbletalkModule=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-rumbletalk.umd.min.js.map