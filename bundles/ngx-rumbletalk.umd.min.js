!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("rxjs/operators"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("ngx-rumbletalk",["exports","rxjs/operators","@angular/core","@angular/common/http"],t):t(e["ngx-rumbletalk"]={},e.rxjs.operators,e.ng.core,e.ng.common.http)}(this,function(e,t,n,r){"use strict";var o=(i.prototype.address=function(e){return this.http.get("https://www.rumbletalk.com/client/service.php?hash="+e).pipe(t.map(function(e){return e.address}))},i.prototype.reload=function(e){return this.http.get(e)},i.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],i.ctorParameters=function(){return[{type:r.HttpClient}]},i.ngInjectableDef=n.defineInjectable({factory:function(){return new i(n.inject(r.HttpClient))},token:i,providedIn:"root"}),i);function i(e){this.http=e}var a,s,l="https://",p="https://www.rumbletalk.com/",c=(u.prototype.ngOnInit=function(){var t=this;this.service.address(this.hash).subscribe(function(e){a=e,t.iframeElement.nativeElement.src="https://"+e+"/"+t.hash+"/",t.addListeners(),t.instantiateQuery()})},u.prototype.ngOnDestroy=function(){clearInterval(s)},u.prototype.addListeners=function(){window.addEventListener("message",this.info.bind(this),!1)},u.prototype.info=function(e){isFinite(e.data)?clearInterval(s):"object"==typeof e.data&&e.data.reload&&this.reload()},u.prototype.reload=function(){var n=this,e=p+"client/service.php?hash="+this.hash;this.service.reload(e).subscribe(function(e){if(e.status){a=e.address;var t=l+a+"/"+n.hash+"/";n.iframeElement.nativeElement instanceof HTMLIFrameElement?n.iframeElement.nativeElement.src=t:n.iframeElement.nativeElement.location.href=t,n.instantiateQuery()}},function(e){return location.reload()})},u.prototype.instantiateQuery=function(){s=setInterval(this.query.bind(this),1e3)},u.prototype.query=function(){try{var e,t=void 0;e=this.iframeElement.nativeElement instanceof HTMLIFrameElement?(t=this.iframeElement.nativeElement.contentWindow,l+a):(t=this.iframeElement.nativeElement,p),t.postMessage("toolbar",e)}catch(n){}},u.prototype.validateOrigin=function(e){return/^https:\/\/.+\.rumbletalk\.(net|com)(:4433)?$/.test(e)},u.decorators=[{type:n.Component,args:[{selector:"ngx-rumbletalk",template:'<iframe\r\n  #iframe\r\n  allowtransparency="true"\r\n  allow="microphone; camera"\r\n  [width]="width"\r\n  [height]="height"\r\n></iframe>\r\n',changeDetection:n.ChangeDetectionStrategy.OnPush,styles:["iframe{border:0;width:100%;height:100%;background-color:transparent;overflow:hidden}"]}]}],u.ctorParameters=function(){return[{type:o}]},u.propDecorators={iframeElement:[{type:n.ViewChild,args:["iframe"]}],floating:[{type:n.Input}],width:[{type:n.Input}],height:[{type:n.Input}],hash:[{type:n.Input}]},u);function u(e){this.service=e}var h=(m.decorators=[{type:n.NgModule,args:[{declarations:[c],imports:[r.HttpClientModule],exports:[c]}]}],m);function m(){}e.NgxRumbletalkService=o,e.NgxRumbletalkComponent=c,e.NgxRumbletalkModule=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-rumbletalk.umd.min.js.map